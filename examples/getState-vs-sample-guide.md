# getState() vs Sample: –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üéØ –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sample` –≤–º–µ—Å—Ç–æ `getState()` –∫–æ–≥–¥–∞ —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç–æ—Ä–∞.**

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å getState()

### 1. Race Condition (–ì–æ–Ω–∫–∞ —É—Å–ª–æ–≤–∏–π)

```javascript
const $balance = createStore(1000)
const transfer = createEvent()

// ‚ùå –û–ü–ê–°–ù–û
const transferFx = createEffect(async (amount) => {
  const balance = $balance.getState() // –ß–∏—Ç–∞–µ–º 1000‚ÇΩ

  if (balance >= amount) {
    await sendToServer(amount)
    $balance.setState(balance - amount)
  }
})

transfer.watch(amount => transferFx(amount))

// –ü—Ä–æ–±–ª–µ–º–∞: –¥–≤–µ –±—ã—Å—Ç—Ä—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
transfer(600) // balance = 1000 ‚úÖ
transfer(600) // balance = 1000 ‚úÖ (—Ç–æ–∂–µ –ø—Ä–æ—à–ª–∞!)
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –±–∞–ª–∞–Ω—Å = -200‚ÇΩ üí•
```

**–ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å:**
- –û–±–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–æ—á–∏—Ç–∞–ª–∏ `1000‚ÇΩ` **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**
- –û–±–µ –ø—Ä–æ—à–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É
- –û–±–µ —Å–ø–∏—Å–∞–ª–∏ –¥–µ–Ω—å–≥–∏ ‚Üí –æ–≤–µ—Ä–¥—Ä–∞—Ñ—Ç!

### 2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å

```javascript
const $userData = createStore({balance: 100, bonus: 50})

// ‚ùå –û–ü–ê–°–ù–û
const purchaseFx = createEffect(async (price) => {
  const user = $userData.getState()
  console.log('–ù–∞—á–∞–ª–æ:', user.balance) // 100

  await delay(100) // –î–æ–ª–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è

  // –ó–∞ —ç—Ç–æ –≤—Ä–µ–º—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–≥–ª–æ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è!
  const userNow = $userData.getState()
  console.log('–°–µ–π—á–∞—Å:', userNow.balance) // 200 üò±

  // –° –∫–∞–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Ä–∞–±–æ—Ç–∞—Ç—å?
})
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–æ –≤—Ä–µ–º—è `await` —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å. –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏.

### 3. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```javascript
const $price = createStore(100)
const $quantity = createStore(2)
const $discount = createStore(10)

// ‚ùå –û–ü–ê–°–ù–û
const calculateFx = createEffect(() => {
  const price = $price.getState()
  const qty = $quantity.getState()
  const discount = $discount.getState()

  // –í—Å–µ —Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –†–ê–ó–ù–´–• –º–æ–º–µ–Ω—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏!
  // –û–Ω–∏ –º–æ–≥–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏ getState()
  return price * qty - discount
})
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏, —á—Ç–æ –≤—Å–µ —Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –æ–¥–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Sample

### 1. Race Condition - —Ä–µ—à–µ–Ω–∏–µ

```javascript
const $balance = createStore(1000)
const transfer = createEvent()

const transferFx = createEffect(async ({amount, balance}) => {
  // balance - —ç—Ç–æ –°–ù–ò–ú–û–ö –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞ —Å–æ–±—ã—Ç–∏—è
  if (balance >= amount) {
    await sendToServer(amount)
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–Ω–∏–º–æ–∫, –Ω–µ getState()
    return balance - amount
  }
})

// ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û
sample({
  source: $balance,
  clock: transfer,
  fn: (balance, amount) => ({balance, amount}),
  target: transferFx
})

// –î–≤–µ –±—ã—Å—Ç—Ä—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
transfer(600) // balance = 1000 ‚úÖ
transfer(600) // balance = 400 ‚ùå (–≤—Ç–æ—Ä–∞—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞)
```

**–ì–∞—Ä–∞–Ω—Ç–∏—è:** –ö–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç **–∞–∫—Ç—É–∞–ª—å–Ω—ã–π** —Å–Ω–∏–º–æ–∫ –±–∞–ª–∞–Ω—Å–∞ –≤ –º–æ–º–µ–Ω—Ç —Å–æ–±—ã—Ç–∏—è.

### 2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å - —Ä–µ—à–µ–Ω–∏–µ

```javascript
const $userData = createStore({balance: 100, bonus: 50})

const purchaseFx = createEffect(async (user) => {
  // user - —ç—Ç–æ –°–ù–ò–ú–û–ö, –æ–Ω –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è
  console.log('–ù–∞—á–∞–ª–æ:', user.balance) // 100

  await delay(100)

  // user –ù–ï –∏–∑–º–µ–Ω–∏–ª—Å—è!
  console.log('–°–µ–π—á–∞—Å:', user.balance) // 100 ‚úÖ

  // –†–∞–±–æ—Ç–∞–µ–º —Å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
})

// ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û
sample({
  source: $userData,
  clock: purchase,
  target: purchaseFx
})
```

**–ì–∞—Ä–∞–Ω—Ç–∏—è:** –î–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞ **–Ω–µ –º–µ–Ω—è—é—Ç—Å—è** –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

### 3. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ - —Ä–µ—à–µ–Ω–∏–µ

```javascript
const $price = createStore(100)
const $quantity = createStore(2)
const $discount = createStore(10)

const calculateFx = createEffect(({price, quantity, discount}) => {
  // –í—Å–µ —Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –û–î–ù–û–ì–û –º–æ–º–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏!
  return price * quantity - discount
})

// ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û
sample({
  source: {
    price: $price,
    quantity: $quantity,
    discount: $discount
  },
  clock: calculate,
  target: calculateFx
})
```

**–ì–∞—Ä–∞–Ω—Ç–∏—è:** –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ **–æ–¥–Ω–æ–≥–æ –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ —Å–Ω–∏–º–∫–∞**.

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | `getState()` | `sample` |
|----------|-------------|----------|
| **Race conditions** | ‚ùå –ù–µ –∑–∞—â–∏—â–∞–µ—Ç | ‚úÖ –ó–∞—â–∏—â–∞–µ—Ç —Å–Ω–∏–º–∫–æ–º |
| **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** | ‚ùå –ú–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è | ‚úÖ –ê—Ç–æ–º–∞—Ä–Ω—ã–π —Å–Ω–∏–º–æ–∫ |
| **Async/await** | ‚ùå –°–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è | ‚úÖ –°–Ω–∏–º–æ–∫ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è |
| **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏** | ‚ùå –ú–æ–≥—É—Ç –±—ã—Ç—å –∏–∑ —Ä–∞–∑–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤ | ‚úÖ –í—Å–µ –∏–∑ –æ–¥–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ |
| **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** | ‚ùå –ù–µ—Ç –≤ –≥—Ä–∞—Ñ–µ | ‚úÖ –Ø–≤–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø | ‚ö†Ô∏è –ù–µ–±–æ–ª—å—à–æ–π –æ–≤–µ—Ä—Ö–µ–¥ |
| **–û—Ç–ª–∞–¥–∫–∞** | ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å | ‚úÖ –Ø–≤–Ω—ã–µ —Å–≤—è–∑–∏ –≤ –≥—Ä–∞—Ñ–µ |

## üí° –ö–æ–≥–¥–∞ getState() –ë–ï–ó–û–ü–ê–°–ï–ù

### 1. –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```javascript
// ‚úÖ –û–ö: –ü—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
$store.watch(value => {
  console.log('Store changed:', value)
  console.log('Another store:', $anotherStore.getState())
})
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è UI

```javascript
// ‚úÖ –û–ö: React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ
function Component() {
  const value = useStoreMap($store, state => state.value)
  // –∏–ª–∏
  const directValue = $store.getState() // –¥–ª—è –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è
}
```

### 3. –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –±–µ–∑ side effects

```javascript
// ‚úÖ –û–ö: –ß–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
function getCurrentTotal() {
  const price = $price.getState()
  const qty = $quantity.getState()
  return price * qty // –ü—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
}
```

### 4. –ß—Ç–µ–Ω–∏–µ –≤–Ω–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∞

```javascript
// ‚úÖ –û–ö: –í–Ω–µ—à–Ω–∏–π –∫–æ–¥, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å Effector –≥—Ä–∞—Ñ–æ–º
window.addEventListener('beforeunload', () => {
  const userData = $user.getState()
  localStorage.setItem('user', JSON.stringify(userData))
})
```

## üö® –ö–æ–≥–¥–∞ getState() –û–ü–ê–°–ï–ù

### 1. ‚ùå –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å —É—Å–ª–æ–≤–∏—è–º–∏

```javascript
// –ü–õ–û–•–û
const processFx = createEffect(() => {
  if ($balance.getState() > 1000) {
    // –ö –º–æ–º–µ–Ω—Ç—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å –º–æ–≥ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è!
    charge(100)
  }
})
```

### 2. ‚ùå –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

```javascript
// –ü–õ–û–•–û
const saveFx = createEffect(async () => {
  const data = $store.getState() // –î–æ await
  await api.save(data)
  const newData = $store.getState() // –ü–æ—Å–ª–µ await - –º–æ–∂–µ—Ç –±—ã—Ç—å –¥—Ä—É–≥–∏–º!
})
```

### 3. ‚ùå –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```javascript
// –ü–õ–û–•–û: –¥–≤–∞ –±—ã—Å—Ç—Ä—ã—Ö –≤—ã–∑–æ–≤–∞
event.watch(() => {
  const count = $counter.getState()
  processData(count) // –û–±–∞ –≤—ã–∑–æ–≤–∞ –ø–æ–ª—É—á–∞—Ç –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ
})

event()
event() // Race condition!
```

### 4. ‚ùå –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞

```javascript
// –ü–õ–û–•–û: –ø—Ä–æ–≤–µ—Ä–∫–∞ + –¥–µ–π—Å—Ç–≤–∏–µ
const buyFx = createEffect(async (price) => {
  const balance = $balance.getState()
  if (balance >= price) { // –ü—Ä–æ–≤–µ—Ä–∫–∞
    await delay(100)
    deduct(price) // –î–µ–π—Å—Ç–≤–∏–µ - –±–∞–ª–∞–Ω—Å –º–æ–≥ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è!
  }
})
```

## üéì –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞

### ‚úÖ –ü—Ä–∞–≤–∏–ª–æ 1: Effect –∑–∞–≤–∏—Å–∏—Ç –æ—Ç Store ‚Üí Sample

```javascript
// –ï—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–æ—Ä–∞ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
sample({
  source: $store,
  clock: trigger,
  target: effectFx
})
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª–æ 2: Async + Decisions ‚Üí Sample

```javascript
// –ï—Å–ª–∏ –µ—Å—Ç—å await –ò –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è —Ä–µ—à–µ–Ω–∏—è
const fx = createEffect(async (data) => {
  if (data.value > threshold) { // –†–µ—à–µ–Ω–∏–µ
    await doSomething(data)     // Async
  }
})

// –ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ data —á–µ—Ä–µ–∑ sample!
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª–æ 3: –ù–µ—Å–∫–æ–ª—å–∫–æ Store ‚Üí Sample —Å Object

```javascript
// –í—Å–µ–≥–¥–∞ –∫–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ sample
sample({
  source: {
    a: $storeA,
    b: $storeB,
    c: $storeC
  },
  clock: trigger,
  target: fx
})
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª–æ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ + –î–µ–π—Å—Ç–≤–∏–µ ‚Üí Sample

```javascript
// Check-then-act –ø–∞—Ç—Ç–µ—Ä–Ω
const processFx = createEffect(({balance, amount}) => {
  if (balance >= amount) { // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–Ω–∏–º–∫–µ
    return deduct(amount)  // –î–µ–π—Å—Ç–≤–∏–µ —Å–æ —Å–Ω–∏–º–∫–æ–º
  }
})

sample({source: $balance, clock: event, target: processFx})
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å getState():

1. **–ë–∞–≥ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–Ω–æ–≥–¥–∞** (race condition)
2. **–ë–∞–≥ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
3. **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö**
4. **–†–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö async —Ñ—É–Ω–∫—Ü–∏–∏**

### –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:

```javascript
// –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ getState() –≤–Ω—É—Ç—Ä–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
// BEFORE
const fx = createEffect(() => {
  const value = $store.getState() // üîç –ù–∞—à–ª–∏!
  // ...
})

// AFTER
const fx = createEffect((value) => {
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä
})

sample({
  source: $store,
  target: fx
})
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –ü—Ä–∏–º–µ—Ä—ã –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ:

- `priority-example-1.js` - –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
- `priority-example-2.js` - Store + Effect —á–µ—Ä–µ–∑ sample
- `priority-example-3-complex.js` - –í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- `priority-example-4-getState-vs-sample.js` - –ü—Ä–æ–±–ª–µ–º—ã —Å getState
- `priority-example-5-real-race-condition.js` - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ —Å getState
- `priority-cheatsheet.md` - –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤:

```bash
# –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ race conditions
node examples/priority-example-5-real-race-condition.js

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ getState vs sample
node examples/priority-example-4-getState-vs-sample.js
```

## üéØ –ò—Ç–æ–≥–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ ACID

**–ï—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç–æ—Ä–∞:**

```
–í–°–ï–ì–î–ê –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ—Ä–µ–∑ sample
–ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ getState() –≤–Ω—É—Ç—Ä–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞
```

**–ü–æ—á–µ–º—É:**
- ‚úÖ **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å** - –æ–ø–µ—Ä–∞—Ü–∏—è —Å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–¥–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞
- ‚úÖ **–ò–∑–æ–ª—è—Ü–∏—è** - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –≤–ª–∏—è—é—Ç
- ‚úÖ **–î–æ–ª–≥–æ–≤–µ—á–Ω–æ—Å—Ç—å** - –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

## üìñ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

`getState()` - —ç—Ç–æ **–∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –≤—ã—Ö–æ–¥** –∏–∑ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∞ Effector.

`sample` - —ç—Ç–æ **–¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ** –≤–Ω—É—Ç—Ä–∏ –≥—Ä–∞—Ñ–∞.

**–î–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –≤—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–π—Ç–µ `sample`!**
