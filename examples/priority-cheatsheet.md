# –®–ø–∞—Ä–≥–∞–ª–∫–∞: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤ Effector

## üìã –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–µ—Ä–∞—Ç–æ—Ä—ã | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è |
|-----------|----------|-----------|----------|-------------------|
| **0** | `child` | `forward()` (deprecated) | –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∫ —Å–ª–µ–¥—É—é—â–∏–º —É–∑–ª–∞–º | –°–∞–º—ã–π –ø–µ—Ä–≤—ã–π - –¥–æ –≤—Å–µ—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π |
| **1** | `pure` | `.map()`, `.on()`, `.prepend()` | –ß–∏—Å—Ç—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ | –ü–æ—Å–ª–µ child, –¥–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö |
| **2** | `read` | –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —á—Ç–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è | –ß—Ç–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Å—Ç–æ—Ä–æ–≤ –¥–ª—è –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π | –ü–æ—Å–ª–µ pure, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ |
| **3** | `barrier` | `combine()` | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ | –ü–æ—Å–ª–µ –≤—Å–µ—Ö pure –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π |
| **4** | `sampler` | `sample()`, `guard()` | –í—ã–±–æ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ª–æ–≤–∏–π | –ü–µ—Ä–µ–¥ effect, –ø–æ—Å–ª–µ barrier |
| **5** | `effect` | `.watch()`, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ | –ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (–ª–æ–≥–∏, API –∑–∞–ø—Ä–æ—Å—ã) | –°–∞–º—ã–π –ø–æ—Å–ª–µ–¥–Ω–∏–π - –≤–∏–¥–∏—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è |

## üîÑ –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤–∏–∑—É–∞–ª—å–Ω–æ)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –í—ã–∑–æ–≤ —Å–æ–±—ã—Ç–∏—è: userAction()                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 0Ô∏è‚É£ CHILD QUEUE (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 0)                            ‚îÇ
‚îÇ  ‚Ä¢ forward() - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫ —Å–ª–µ–¥—É—é—â–∏–º —É–∑–ª–∞–º        ‚îÇ
‚îÇ  ‚Ä¢ –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–≤—è–∑–∏ –≥—Ä–∞—Ñ–∞                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1Ô∏è‚É£ PURE QUEUE (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)                             ‚îÇ
‚îÇ  ‚Ä¢ $store.on(event, handler) - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–≤        ‚îÇ
‚îÇ  ‚Ä¢ $store.map(fn) - –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è                ‚îÇ
‚îÇ  ‚Ä¢ event.prepend(fn) - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ payload           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2Ô∏è‚É£ READ QUEUE (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)                             ‚îÇ
‚îÇ  ‚Ä¢ –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —á—Ç–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è                          ‚îÇ
‚îÇ  ‚Ä¢ (–Ω–µ –≤–∏–¥–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3Ô∏è‚É£ BARRIER QUEUE (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3)                          ‚îÇ
‚îÇ  ‚Ä¢ combine($a, $b) - –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö             ‚îÇ
‚îÇ  ‚Ä¢ –ñ–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö PURE –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 4Ô∏è‚É£ SAMPLER QUEUE (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4)                          ‚îÇ
‚îÇ  ‚Ä¢ sample({source, clock}) - –≤—ã–±–æ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π           ‚îÇ
‚îÇ  ‚Ä¢ guard({source, filter}) - —É—Å–ª–æ–≤–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 5Ô∏è‚É£ EFFECT QUEUE (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5)                           ‚îÇ
‚îÇ  ‚Ä¢ $store.watch(fn) - –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è             ‚îÇ
‚îÇ  ‚Ä¢ event.watch(fn) - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π                ‚îÇ
‚îÇ  ‚Ä¢ effect() - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–æ—Ä–∞

```javascript
const $count = createStore(0)
const increment = createEvent()

$count.on(increment, x => x + 1)  // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: PURE (1)
$count.watch(x => console.log(x))  // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: EFFECT (5)

increment()
// –ü–æ—Ä—è–¥–æ–∫:
// 1. [PURE] $count.on - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 0 -> 1
// 2. [EFFECT] $count.watch - –ª–æ–≥: 1
```

### –ü—Ä–∏–º–µ—Ä 2: Combine + Sample

```javascript
const $price = createStore(100)
const $quantity = createStore(2)
const checkout = createEvent()

// BARRIER –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (3)
const $total = combine($price, $quantity, (price, qty) => price * qty)

// SAMPLER –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (4)
const orderData = sample({
  source: $total,
  clock: checkout
})

$price.on(checkout, x => x * 1.1)  // PURE (1)

checkout()
// –ü–æ—Ä—è–¥–æ–∫:
// 1. [PURE] $price.on - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã
// 2. [BARRIER] combine - –ø–µ—Ä–µ—Å—á–µ—Ç total
// 3. [SAMPLER] sample - –≤—ã–±–æ—Ä–∫–∞ –¥–ª—è orderData
// 4. [EFFECT] –≤—Å–µ watch –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏
```

### –ü—Ä–∏–º–µ—Ä 3: –≠—Ñ—Ñ–µ–∫—Ç —á–µ—Ä–µ–∑ Sample

```javascript
const saveDataFx = createEffect(async (data) => {
  await fetch('/api/save', {body: JSON.stringify(data)})
})

const $userData = createStore({name: 'User'})
const saveClicked = createEvent()

$userData.on(saveClicked, user => ({...user, saved: true}))  // PURE (1)

sample({
  source: $userData,
  clock: saveClicked,
  target: saveDataFx  // SAMPLER (4) -> EFFECT (5)
})

saveClicked()
// –ü–æ—Ä—è–¥–æ–∫:
// 1. [PURE] $userData.on - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
// 2. [SAMPLER] sample —á–∏—Ç–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
// 3. [EFFECT] –∑–∞–ø—É—Å–∫ saveDataFx —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### ‚úÖ –ü—Ä–∞–≤–∏–ª–æ 1: –ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–≤—ã–º–∏
```javascript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: .on() (pure) –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –¥–æ .watch() (effect)
$store.on(event, x => x + 1)  // –°–Ω–∞—á–∞–ª–∞
$store.watch(console.log)      // –ü–æ—Ç–æ–º

// –ü–æ—ç—Ç–æ–º—É watch –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª–æ 2: Sample –≤–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö pure –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
```javascript
$price.on(update, x => x + 10)     // PURE (1)
$quantity.on(update, x => x + 1)   // PURE (1)

sample({
  source: {price: $price, qty: $quantity},
  clock: update  // SAMPLER (4) - –≤–∏–¥–∏—Ç –û–ë–ê –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è!
})
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª–æ 3: Combine —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```javascript
// Combine (barrier) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ü–û–°–õ–ï –≤—Å–µ—Ö pure –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
const $total = combine($a, $b, (a, b) => a + b)

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±–æ–∏—Ö —Å—Ç–æ—Ä–æ–≤ ‚Üí combine –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
$a.on(event, x => x + 1)  // PURE (1)
$b.on(event, x => x + 1)  // PURE (1)
// ‚Üí combine (BARRIER 3) –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª–æ 4: –≠—Ñ—Ñ–µ–∫—Ç—ã –≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ
```javascript
// –í—Å–µ watch –≤–∏–¥—è—Ç —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const fx = createEffect(() => {
  console.log('Effect handler')
})

fx.watch(() => console.log('Before handler'))
fx.done.watch(() => console.log('After handler'))

fx()
// 1. [EFFECT] Before handler
// 2. [EFFECT] Effect handler
// 3. [EFFECT] After handler
```

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### ‚ùå –û—à–∏–±–∫–∞ 1: –û–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤ watch
```javascript
const $count = createStore(0)
const increment = createEvent()

$count.on(increment, x => x + 1)

$count.watch(count => {
  console.log(count)  // –í—Å–µ–≥–¥–∞ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (1, 2, 3...)
  // –ù–ï —Å—Ç–∞—Ä–æ–µ (0, 1, 2...)!
})

increment()  // –í—ã–≤–µ–¥–µ—Ç: 1 (–Ω–µ 0!)
```

**–ü–æ—á–µ–º—É:** `.on()` (pure) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –î–û `.watch()` (effect)

### ‚ùå –û—à–∏–±–∫–∞ 2: Sample —á–∏—Ç–∞–µ—Ç —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```javascript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
sample({
  source: $store,
  clock: updateEvent,
  batch: false  // –ë–µ–∑ –±–∞—Ç—á–∏—Ä–æ–≤–∞–Ω–∏—è
})

$store.on(updateEvent, x => x + 1)

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
sample({
  source: $store,
  clock: updateEvent,
  batch: true  // –° –±–∞—Ç—á–∏—Ä–æ–≤–∞–Ω–∏–µ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
})
```

**–ü–æ—á–µ–º—É:** –° `batch: true` sample –∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö pure –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

## üìö –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤

```bash
# –ü—Ä–∏–º–µ—Ä 1: on vs sample
node examples/priority-example-1.js

# –ü—Ä–∏–º–µ—Ä 2: —Å—Ç–æ—Ä + —ç—Ñ—Ñ–µ–∫—Ç —á–µ—Ä–µ–∑ sample
node examples/priority-example-2.js

# –ü—Ä–∏–º–µ—Ä 3: –≤—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤ –æ–¥–Ω–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏
node examples/priority-example-3-complex.js
```

## üîç –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ

1. **src/effector/kernel.ts:163-180** - —Ñ—É–Ω–∫—Ü–∏—è `getPriority()`
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —á–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

2. **src/effector/kernel.ts:78-160** - —Ñ—É–Ω–∫—Ü–∏—è `launch()`
   - –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–µ–π

3. **src/effector/step.ts** - —Å–æ–∑–¥–∞–Ω–∏–µ —à–∞–≥–æ–≤ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
   - –§—É–Ω–∫—Ü–∏–∏ `mov()`, `compute()`, `read()`, `calc()`, `run()`

4. **documentation/src/content/docs/en/explanation/computation-priority.md**
   - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

## üéì –†–µ–∑—é–º–µ

**6 —É—Ä–æ–≤–Ω–µ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤** –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç:
- ‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≤–∏–¥—è—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- ‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é** - –±–∞—Ç—á–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (combine –≤–∏–¥–∏—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
- ‚úÖ **–ó–∞—â–∏—Ç—É –æ—Ç –≥–æ–Ω–æ–∫** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ race conditions

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –ß–µ–º –Ω–∏–∂–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —Ç–µ–º —Ä–∞–Ω—å—à–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è.
